try using struct of arrays pattern rather than array of structs
